---
- name: "download plgr/bind image"
  docker_image:
    name: "plgr/bind"
    state: present

- name: "create dns data directory"
  file:
    name: "{{ data_dir }}"
    state: directory

- name: "stores local named configuration file"
  template:
    src: "named.conf.local.j2"
    dest: "{{ data_dir }}/named.conf.local"

- name: "stores zone db file"
  template:
    src: "db.zone.j2"
    dest: "{{ data_dir }}/db.{{ zone_name }}"

- name: "stores reverse zone db file"
  template:
    src: "db.reverse_zone.j2"
    dest: "{{ data_dir }}/db.{{ reverse_zone_name }}"
